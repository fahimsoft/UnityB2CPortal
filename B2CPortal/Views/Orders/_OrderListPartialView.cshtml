@model List<B2CPortal.Models.OrderVM>

<!-- cart content section start -->
@{ 
    Layout = null;
}
<style>
/*    .ellipsiscontent {
        display: -webkit-box;
        max-width: 200px;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }*/
    .overflow {
        overflow: hidden;
        -ms-text-overflow: ellipsis;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

        .overflow:hover {
            overflow: visible;
        }

            .overflow:hover span {
                position: relative;
                background-color: white;
                box-shadow: 0 0 4px 0 black;
                border-radius: 1px;
            }
</style>

<div class="quickviewdialog">
</div>
<div class="product-details quick-view modal animated zoomInUp" id="quick-view">

</div>

        <section class="pages cart-page section-padding">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12">
                        <div class="table-responsive padding60">
                            <table class="wishlist-table text-center" id="myTable">
                                <thead>
                                    <tr>
                                        <th>Order No.</th>
                                        @*<th>Email</th>*@
                                        @*<th>Phone No.</th>*@
                                        @*<th>Gender</th>*@
                                        @*<th> DOB</th>*@
                                        @*<th>CNIC</th>*@
                                        <th>Order Date</th>
                                        <th width="10%">Shipping</th>
                                        <th width="10%">Billing</th>
                                        <th width="10%">Description</th>
                                        <th>Items</th>
                                        <th>  Total Amount</th>
                                        <th> Payment Mode</th>
                                        <th> Status</th>
                                        <th> Payment </th>
                                        <th> Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @if (Model != null && Model.Count > 0)
                                    {
                                        foreach (var item in Model)
                                        {
                                            <tr data-id="@item.Id">
                                                <td class="td-img text-left">
                                                    @item.OrderNo
                                                    @*  <a href="@Url.Action("Index", "ProductDetails", new { productId = item.Id})"><img src="@item.MasterImageUrl" alt="Add Product" /></a>*@
                                                    <!--<div class="items-dsc">
                                                     <h5><a href="@Url.Action("Index", "ProductDetails", new { productId = item.Id })"> @item.Name </a></h5>-->
                                                    @*<p class="itemcolor">Color : <span>Blue</span></p>*@
                                                    @*<p class="itemcolor">Size   : <span>SL</span></p>*@
                                                    <!--</div>-->
                                                </td>
                                                @*<td class="pricecol">
                                                    @item.EmailId
                                                </td>
                                                <td class="pricecol">
                                                    @item.PhoneNo
                                                </td>
                                                <td>
                                                    @item.Gender
                                                </td>
                                                <td>
                                                    @item.DateOfBirth
                                                </td>*@

                                                @*<td>
                                                    @item.CNIC
                                                </td>*@
                                                <td>
                                                    @*@item.CreatedOn*@
                                                    @Html.DisplayFor(i => item.CreatedOn)
                                                </td>
                                                <td>
                                                        <span class="overflow"  style="float: left; width: 50px">
                                                            <span>@item.ShippingAddress </span>
                                                        </span>
                                                </td>

                                                <td>
                                                    <span class="overflow" style="float: left; width: 50px">
                                                        <span>  @item.BillingAddress</span>
                                                    </span>
                                                   
                                                </td>
                                                <td>

                                                    <span class="overflow" style="float: left; width: 50px">
                                                        <span>   @item.OrderDescription</span>
                                                    </span>
                                                </td>
                                                <td>
                                                    @item.TotalQuantity
                                                </td>

                                                <td>
                                                    @item.Currency @item.TotalPrice
                                                </td>
                                                <td>
                                                    @item.PaymentMode
                                                </td>
                                                <td style="color:rebeccapurple">
                                                    @item.Status
                                                </td>
                                                
                                                <td style="color:rebeccapurple">
                                                    @{ if (item.PaymentStatus == true)
                                                        {


                                                            <span style="color:green">&#10003;</span>

                                                        }
                                                        else
                                                        {
                                                            <span style="color:red" >&#10539;</span>

                                                            }
                                                        }
                                                    </td>

                                                <td>
                                                    <a href="#" data-toggle="modal" id="19" data-target="#quick-view" onclick="Handleorderdetail(@item.Id)"> <i class="mdi mdi-account-card-details" title="Order Detail"></i> </a>
                                                   @if (item.PaymentMode.ToLower() != "cod" && item.Status.ToLower() == "inprocess" && item.PaymentStatus == false)
                                                   {
                                                    @*<a href="@Url.Action("ManagePayment","Orders",new { id = item.Id })"  class="btn-info" onclick="Handleorderdetail(@item.Id)"> Manage </a>*@
                                                    <a href="@Url.Action("Checkout","Orders",new { id = item.Id })"  class="btn-info" onclick="Handleorderdetail(@item.Id)"> Manage </a>
                                                   }


                                                </td>

                                                <td>@*<i class="mdi mdi-close removecartbtn" title="Remove this product"></i>*@</td>
                                            </tr>
                                        }



                                    }
                                    else
                                    {
                                        <tr>
                                            <td colspan="10">
                                                <h4>
                                                    Your Order History is Empity
                                                </h4>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            @*<div class="text-right">
                                    @if (Model == null || Model.Count() <= 0)
                                    {


                                        <button type="button" id="updatecart" disabled="true" class="btn btn-primary">Update Cart</button>
                                    }
                                    else
                                    {
                                        <button type="button" id="updatecart" class="btn btn-primary">Update Cart</button>
                                    }
                                </div>*@
                        </div>

                    </div>
                </div>
            </div>
        </section>



        <!--<script>
    //$(document).ready(function () {
    //    jQuery('.plus-minus-box').keyup(function () {
    //        this.value = this.value.replace(/[^0-9\.]/g, '');
    //    });
    //});-->
    @*$(".removecartbtn").click(function () {
        var row = $(this).closest("tr");
        var id = $(row).attr('data-id');
        $.ajax({
            type: "POST",
            url: '@Url.Action("DeleteCart", "Product")', //"/Product/DeleteCart",
            data: {
                id: id,
            },
            success: function (data) {
                if (!data.success) {
                    toastr.error(data.msg);
                } else {
                toastr.success(data.msg);
                }
                $("#CartTable").load('@Url.Action("GetCartList", "Product")');
                ShowCartProducts();
                $(row).remove();
                return false;

            }
        });
         //$(this).remove();
        //return false;
    });
    $("#updatecart").click(function () {
        toastr.info("Please Wait");
        var cartids = [];
        var cartquentites = [];
        var array = $.makeArray($('tbody tr[id]').map(function () {
            return this.id;
        }));
        //$('#myTable').on('click', 'tbody tr', function (event, it) {
        //    console.log(it.length);
        //});
        var tb = $("#myTable tbody");//.closest("tr");
        var size = tb.find("tr").length;
        tb.find("tr").each(function (index, element) {
            cartids.push(element.dataset["id"]);
            $(element).find('td').each(function (index, element) {
                if (parseInt($(element).find('input').val()) > 0) {
                    cartquentites.push($(element).find('input').val());
                }
            });
        });
        console.log("Number of rows : " + cartquentites);
        console.log("Number of  : " + cartids);
        $.ajax({
            type: "POST",
            url: '@Url.Action("UpdateCartList", "Product")', //"/Product/DeleteCart",
            data: {
                cartquentites: cartquentites,
                cartids: cartids
            },
            success: function (data) {
                if (!data.success) {
                    ShowCartProducts();
                    $("#CartTable").load('@Url.Action("GetCartList", "Product")');
                    toastr.success(data.msg);
                } else {
                    toastr.error(data.msg);
                }

            }
        });
    });*@

        <!--</script>-->
